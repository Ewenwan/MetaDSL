story(main)
{
  local
  {
  	@user(10e+2);
  	@pass(10E-2);
  };
  onmessage("start")
  {
	func(name => val,name2 => val2);
    bindui(@window){
      inputs("Panel\x30/Account","Panel\60/Passwd");
      onevent("button\60","ok","Panel/Button");
    };
  	log("LoginDlg start");
    @window.SetActive(changetype(0,"bool"));
  };
  onmessage("show_login")
  {
    publishgfxevent("ui_hide","ui");
    @window.SetActive(changetype(1,"bool"));
  };  
  onnamespacedmessage("on_click")
  {
  	log("LoginDlg on click {0}", 0.13e+2.ToString());
  	@user=listget($1,0,"\0");
  	@pass=listget($1,1,"");
  	if(@user=="" || @pass==""){
    	highlightprompt(0,"Err_LoginNameOrPass");
  	}else{
	  	firemessage("do_login",@user,@pass);
    	@window.SetActive(changetype(0,"bool"));
	  };
  };
};
story("fd\"saf\"
dsads\\")
{
};